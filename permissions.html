<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>

<body>
  
  <button>Request idle detector</button>
  <script>
    
    function resolveAfter2Seconds(x) {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(x);
    }, 2000);
  });
}

  const button = document.querySelector('button');
  button.addEventListener('click', async function f1() {
    if ('IdleDetector' in window) {
       console.log('support IdleDetector')
       const state = await IdleDetector.requestPermission();
        if (state !== 'granted') {
          // Need to request permission first.
          console.log('Idle detection permission not granted.');
        } else {
          console.log('Idle detection permission granted.');
        }
    } else {
         console.log('Not support IdleDetector')
    }
});

  </script>
</body>
</html>
